(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[337],{43337:(t,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>i});const s={name:"Add",data:function(){return{title:null,form:null,loading:!1,errors:{}}},methods:{getData:function(){var t=this;this.title=this.$route.params.app,this.$axios.get("/admin-api/".concat(this.title,"/create/")).then((function(a){t.form=a.data}))},submit:function(t){var a=this;this.loading=!0;var e=this,s=new FormData(document.getElementById("form_data"));this.$isLoading(!0),this.errors={},this.$axios.post("/admin-api/".concat(this.title,"/create/"),s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.$toasted.global.action_completed(),e.$router.push("/resource/".concat(a.title,"/"))})).catch((function(t){Object.keys(t.response.data).forEach((function(a){e.errors[a]=t.response.data,e.$forceUpdate()}))})),e.$isLoading(!1),e.loading=!1}},mounted:function(){this.getData()}};const i=(0,e(51900).Z)(s,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("CCard",[e("CCardHeader",[e("h4",[e("CIcon",{staticClass:"mr-2",attrs:{name:"cil-pencil"}}),t._v(t._s(t.title))],1)]),t._v(" "),e("CCardBody",[e("form",{attrs:{method:"POST",id:"form_data"},on:{submit:function(a){return a.preventDefault(),t.submit(a)}}},[t._l(t.form,(function(a,s,i){return e("div",{key:i,staticClass:"form-group col-md-8 form-row"},[e("label",{staticClass:"col-form-label"},[t._v(t._s(a.label))]),t._v(" "),"text"===a.widget?e("input",{staticClass:"form-control",class:{"is-invalid":t.errors[s]},attrs:{name:s,type:"text",maxlength:a.max_length,disabled:a.disabled}}):"password"===a.widget?e("input",{staticClass:"form-control",class:{"is-invalid":t.errors[s]},attrs:{type:"password",name:s,maxlength:a.max_length,disabled:a.disabled}}):"select"===a.widget?e("select",{staticClass:"form-control",class:{"is-invalid":t.errors[s]},attrs:{name:s,disabled:a.disabled}},t._l(a._choices,(function(a){return e("option",{domProps:{value:a.id?a.id:a[0]}},[t._v("\n              "+t._s(a.name?a.name:a[1])+"\n            ")])})),0):"select_multiple"===a.widget?e("select",{staticClass:"form-control",class:{"is-invalid":t.errors[s]},attrs:{name:s,multiple:"",disabled:a.disabled}},t._l(a._choices,(function(s){return e("option",{domProps:{value:a.id}},[t._v("\n              "+t._s(s.name)+"\n            ")])})),0):"checkbox"===a.widget?e("label",{staticClass:"mr-1 c-switch form-check-label c-switch-primary ml-5"},[e("input",{staticClass:"c-switch-input form-check-input",class:{"is-invalid":t.errors[s]},attrs:{type:"checkbox",name:s,disabled:a.disabled}}),t._v(" "),e("span",{staticClass:"c-switch-slider"})]):"date"===a.widget?e("input",{staticClass:"form-control",class:{"is-invalid":t.errors[s]},attrs:{name:s,type:"date",maxlength:a.max_length,disabled:a.disabled}}):"datetime"===a.widget?e("input",{staticClass:"form-control",class:{"is-invalid":t.errors[s]},attrs:{name:s,type:"datetime-local",maxlength:a.max_length,disabled:a.disabled}}):"textarea"===a.widget?e("CTextarea",{class:{"is-invalid":t.errors[s]},attrs:{placeholder:a.help_text,horizontal:"",rows:"9",name:s}}):"image"===a.widget?e("input",{staticClass:"form-control",class:{"is-invalid":t.errors[s]},attrs:{accept:"image/*",type:"file",name:s}}):t._e()],1)})),t._v(" "),e("button",{staticClass:"btn btn-success float-right mt-2",attrs:{disabled:t.loading}},[t._v("Submit")])],2)])],1)],1)}),[],!1,null,"5320754b",null).exports}}]);